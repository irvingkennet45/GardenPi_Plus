<!DOCTYPE html>
<html>
<head>
	<title>GardenPi Portal - Console</title>
	<meta charset="UTF-8">
        <link rel="stylesheet" href="../styles.css">
        <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/irvingkennet45/GardenPi_Plus/refs/heads/main/assets/favicon.ico">
        <link rel="manifest" href="/manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700&display=swap" rel="stylesheet">
        <script src="../simplelogic.js"></script>
</head>
<body>

<nav class="topNavBar">
  <div class="navGPiContainer">
    <div class="navLogo">
      <a href="/overview">
        <img src="https://github.com/irvingkennet45/GardenPi_Plus/blob/main/assets/garden.gif?raw=true" alt="GardenPi+" class="logoIcon">
      </a>
    </div>
    <div class="navGPi">
      <h1>GardenPi+ Portal</h1>
    </div>
  </div>
  <div class="navMain">
    <div class="navContainer">
      <div class="navLinks">
        <a href="../overview">Overview</a>
        <a href="../controller">Controller</a>
        <a href="../data">Data</a>
        <a href="../weather-data">Weather</a>
        <a href="../console">Console</a>
        <a href="../about">About</a>
      </div>
      <div class="navRight">
        <div class="navClock">
          <p><span id="clockTime">--:--:--</span></p>
        </div>
        <div class="navToggle">
          <label class="switch">
            <input type="checkbox" id="themeToggle">
            <span class="slider">
              <span class="icon sun">‚òÄÔ∏è</span>
              <span class="icon moon">üåô</span>
            </span>
          </label>
        </div>
      </div>
    </div>
  </div>
</nav>

<h1 class="mainHeader">Console</h1>
<div class="console">
  <textarea id="consoleInput" rows="8" cols="60"></textarea><br>
  <button onclick="runConsole()">Run</button>
  <pre id="consoleOutput"></pre>
</div>

<script>
async function runConsole() {
  const code = document.getElementById('consoleInput').value;
  const res = await fetch('/api/console', {method: 'POST', body: code});
  const data = await res.json();
document.getElementById('consoleOutput').textContent =
    data.success ? data.output : 'Error: ' + data.error;
}
</script>

</body>
</html>
